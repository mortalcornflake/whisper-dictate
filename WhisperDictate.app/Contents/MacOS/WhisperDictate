#!/bin/bash
# Get the directory where this script lives (inside the .app bundle)
SCRIPT_DIR="$(cd "$(dirname "$0")" && pwd)"
# Go up 3 levels: MacOS -> Contents -> WhisperDictate.app -> project root
PROJECT_DIR="$(cd "$SCRIPT_DIR/../../.." && pwd)"

cd "$PROJECT_DIR"
# Force arm64 to avoid Rosetta architecture mismatch with venv packages
# Log output for debugging
exec /usr/bin/arch -arm64 "$PROJECT_DIR/venv/bin/python" -u "$PROJECT_DIR/dictate.py" >> "$HOME/whisper-dictate.log" 2>&1
